<%- include('../layouts/header') %>

<style>
  body {
    background: linear-gradient(135deg, #000000, #FFD700);
    color: #fff;
    font-family: 'Poppins', sans-serif;
  }
  h1 { color: #fff; font-weight: 600; }
  .btn-primary { background-color: #FFD700; color: #000; border: none; }
  .btn-primary:hover { background-color: #e6c200; }
  .btn-outline-secondary { color: #fff; border-color: #fff; }
  .btn-outline-secondary:hover { background-color: #fff; color: #000; }
  .card { background-color: rgba(255, 255, 255, 0.1); color: #fff; border: none; }
  .card-title { color: #FFD700; font-weight: 600; }
  .card-text { color: #eaeaea; }
  .form-control { background-color: rgba(255, 255, 255, 0.1); color: #fff; border: 1px solid #ccc; }
  .form-control::placeholder { color: #ccc; }
  .input-group { max-width: 700px; margin: 0 auto; }
  select.form-select { background-color: rgba(255, 255, 255, 0.1); color: #fff; border: 1px solid #ccc; }
  option { color: #000; }
</style>

<div class="container mt-5">

  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="mb-4"> Products List:</h1>
    <a href="/admin/" class="btn btn-outline-secondary">Dashboard</a>
  </div>

  <!-- Search + Category Filter -->
  <form method="GET" class="mb-4">
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Search products..." value="<%= searchQuery %>">
      <select name="category" class="form-select">
        <option value="all" <%= selectedCategory === "all" ? "selected" : "" %>>All Categories</option>
        <% categories.forEach(cat => { %>
          <option value="<%= cat %>" <%= selectedCategory === cat ? "selected" : "" %>><%= cat %></option>
        <% }) %>
      </select>
      <button type="submit" class="btn btn-primary">Filter and search</button>
    </div>
  </form>

  <div class="row">
    <% if (products.length === 0) { %>
      <p class="text-center">No products found.</p>
    <% } %>

    <% products.forEach(product => { %>
      <div class="col-md-4 mb-4">
        <div class="card h-100 shadow rounded-4">
          <img src="/<%= product.image %>" class="card-img-top" height="200" style="object-fit: cover">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title"><%= product.name %></h5>
            <p class="card-text flex-grow-1"><%= product.description.substring(0, 100) %>...</p>
            <a href="/product/<%= product.slug %>" class="btn btn-sm btn-primary mt-2 align-self-start">View</a>
          </div>
        </div>
      </div>
    <% }) %>
  </div>
</div>

<%- include('../layouts/footer') %>
