<%- include('../layouts/header') %>

<style>
  body {
    background: linear-gradient(135deg, #000000, #FFD700);
    color: #fff;
    font-family: 'Poppins', sans-serif;
  }

  h1 {
    color: #fff;
  }

  .btn-success {
    background-color: #FFD700;
    color: #000;
    border: none;
  }

  .btn-success:hover {
    background-color: #e6c200;
  }

  .btn-outline-secondary {
    border-color: #fff;
    color: #fff;
  }

  .btn-outline-secondary:hover {
    background-color: #fff;
    color: #000;
  }

  .table {
    background-color: rgba(255, 255, 255, 0.1);
    color: #fff;
  }

  .table th {
    background-color: rgba(0, 0, 0, 0.8) !important;
    color: #FFD700;
  }

  .table td {
    vertical-align: middle;
  }

  .alert-success {
    background-color: #d4edda;
    color: #155724;
  }

  .alert-danger {
    background-color: #f8d7da;
    color: #721c24;
  }
</style>

<div class="container mt-5">
  <h1 class="mb-4 text-center">Manage Product</h1>

  <% if (success && success.length > 0) { %>
    <div class="alert alert-success text-center"><%= success %></div>
  <% } %>

  <% if (error && error.length > 0) { %>
    <div class="alert alert-danger text-center"><%= error %></div>
  <% } %>

  <div class="d-flex justify-content-between align-items-center mb-3">
    <a href="/admin/" class="btn btn-outline-secondary">Back to Dashboard</a>
    <a href="/admin/products/add" class="btn btn-success">Add Product</a>
  </div>

  <table class="table table-bordered rounded shadow">
    <thead>
      <tr>
        <th>Image</th>
        <th>Name</th>
        <th>Category</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% products.forEach(product => { %>
        <tr>
          <td><img src="/<%= product.image %>" width="60" height="80" class="rounded shadow-sm"></td>
          <td><%= product.name %></td>
          <td><%= product.category %></td>
          <td>
            <a href="/admin/products/edit/<%= product._id %>" class="btn btn-warning btn-sm">Edit</a>
            <form action="/admin/products/delete/<%= product._id %>" method="POST" class="d-inline">
              <button class="btn btn-danger btn-sm" onclick="return confirm('Delete this product?')">Delete</button>
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</div>

<script>
  setTimeout(() => {
    const flashMessages = document.querySelectorAll('.alert');
    flashMessages.forEach(msg => msg.remove());
  }, 2000);
</script>

<%- include('../layouts/footer') %>
